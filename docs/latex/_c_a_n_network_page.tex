Two C\+AN networks have been designed to be inserted into the vehicle\+: a first C\+AN network between the V\+CU and the inverter (C\+AN funzionale) and a second C\+AN network between the V\+CU, T\+CU and S\+C\+Us (C\+AN servizi).

Each node connected to C\+AN servizi network has an unique ID into that network, according to this table\+:~\newline
~\newline
 \tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ N\+O\+DE  }&\textbf{ N\+O\+D\+E-\/\+ID   }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ N\+O\+DE  }&\textbf{ N\+O\+D\+E-\/\+ID   }\\\cline{1-2}
\endhead
$SCU_{Frontal}$  &1   \\\cline{1-2}
$VCU$  &2   \\\cline{1-2}
$SCU_{Rear}$  &3   \\\cline{1-2}
$TCU$  &4   \\\cline{1-2}
\end{longtabu}
~\newline
 



\subsection*{S\+CU slave on power up sequence}


\begin{DoxyEnumerate}
\item {\bfseries send B\+O\+O\+T-\/\+UP message after initialisation state}~\newline
~\newline
 \tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{2}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ C\+O\+B-\/\+ID (11bits)  }&\textbf{ data byte 0   }\\\cline{1-2}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ C\+O\+B-\/\+ID (11bits)  }&\textbf{ data byte 0   }\\\cline{1-2}
\endhead
0x700 + N\+O\+D\+E-\/\+ID  &0x00   \\\cline{1-2}
\end{longtabu}
~\newline
 


\item {\bfseries wait N\+MT \textquotesingle{}go Operational\textquotesingle{} from V\+CU master node}~\newline
~\newline
 \tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{3}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ C\+O\+B-\/\+ID (11bits)  }&\textbf{ data byte 0  }&\textbf{ data byte 1   }\\\cline{1-3}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ C\+O\+B-\/\+ID (11bits)  }&\textbf{ data byte 0  }&\textbf{ data byte 1   }\\\cline{1-3}
\endhead
0x000  &0x01  &0x00   \\\cline{1-3}
\end{longtabu}
~\newline
 


\item {\bfseries periodically send T\+P\+D\+Os with sensors\textquotesingle{} data} Each node starts a timer with \mbox{\hyperlink{group___common__defines__group_ga09c95853fd002fab968d94c5bc44e823}{T\+I\+M\+E\+\_\+\+S\+L\+O\+T\+\_\+\+P\+E\+R\+I\+OD}} period. In this way one slot (or more) of \mbox{\hyperlink{group___common__defines__group_ga09c95853fd002fab968d94c5bc44e823}{T\+I\+M\+E\+\_\+\+S\+L\+O\+T\+\_\+\+P\+E\+R\+I\+OD}} is assigned to each node for transmission, so as to reduce C\+AN bus load.~\newline
~\newline
 \tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{5}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ S\+T\+A\+RT T\+I\+M\+ER  }&\textbf{ packet \#1  }&\textbf{ packet \#2  }&\textbf{ packet \#3  }&\textbf{ packet \#4   }\\\cline{1-5}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ S\+T\+A\+RT T\+I\+M\+ER  }&\textbf{ packet \#1  }&\textbf{ packet \#2  }&\textbf{ packet \#3  }&\textbf{ packet \#4   }\\\cline{1-5}
\endhead
$VCU$  &$SCU_{Frontal}$  &$SCU_{Frontal}$  &$SCU_{Rear}$  &$TCU$   \\\cline{1-5}
&\multicolumn{4}{p{(\linewidth-\tabcolsep*5-\arrayrulewidth*2)*4/5}|}{T\+R\+A\+N\+S\+M\+I\+S\+S\+I\+ON P\+E\+R\+I\+OD   }\\\cline{1-5}
\end{longtabu}
~\newline
 


\end{DoxyEnumerate}

\subsection*{\label{_c_a_n_network_page_TPDO_configuration}%
\Hypertarget{_c_a_n_network_page_TPDO_configuration}%
T\+P\+DO configuration}

\tabulinesep=1mm
\begin{longtabu} spread 0pt [c]{*{8}{|X[-1]}|}
\hline
\rowcolor{\tableheadbgcolor}\textbf{ TX N\+O\+DE  }&\textbf{ Data  }&\textbf{ Unit  }&\textbf{ Data Length  }&\textbf{ Data Offset  }&\textbf{ \#\+C\+AN packet  }&\textbf{ ID  }&\textbf{ Total Length   }\\\cline{1-8}
\endfirsthead
\hline
\endfoot
\hline
\rowcolor{\tableheadbgcolor}\textbf{ TX N\+O\+DE  }&\textbf{ Data  }&\textbf{ Unit  }&\textbf{ Data Length  }&\textbf{ Data Offset  }&\textbf{ \#\+C\+AN packet  }&\textbf{ ID  }&\textbf{ Total Length   }\\\cline{1-8}
\endhead
\multirow{9}{\linewidth}{$SCU_{Frontal}$  }&First A\+P\+PS  &$\%$  &$1\ Byte$  &$[0:7]$  &\multirow{5}{\linewidth}{\#1  }&\multirow{5}{\linewidth}{T\+P\+D\+O1 + N\+O\+D\+E-\/\+ID  }&\multirow{5}{\linewidth}{4   }\\\cline{2-5}
&Second A\+P\+PS  &$\%$  &$1\ Byte$  &$[8:15]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Brake  &$\%$  &$1\ Byte$  &$[16:23]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&A\+P\+PS plausibility  &$bool$  &$4\ bit$  &$[24:27]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Brake plausibility  &$bool$  &$4\ bit$  &$[28:31]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-8}
&Right phonic wheel  &$rpm$  &$2\ Bytes$  &$[0:15]$  &\multirow{4}{\linewidth}{\#2  }&\multirow{4}{\linewidth}{T\+P\+D\+O2 + N\+O\+D\+E-\/\+ID  }&\multirow{4}{\linewidth}{6   }\\\cline{2-5}
&Left phonic wheel  &$rpm$  &$2\ Bytes$  &$[16:31]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Right suspension  &$mm$  &$1\ Byte$  &$[32:39]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Left suspension  &$mm$  &$1\ Byte$  &$[40:47]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{1-8}
\multirow{6}{\linewidth}{$SCU_{Rear}$  }&Accel. X  &$m/s^{2}$  &$1\ Byte$  &$[0:7]$  &\multirow{6}{\linewidth}{\#3  }&\multirow{6}{\linewidth}{T\+P\+D\+O1 + N\+O\+D\+E-\/\+ID  }&\multirow{6}{\linewidth}{8   }\\\cline{2-5}
&Accel. Z  &$m/s^{2}$  &$1\ Byte$  &$[8:15]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Right suspension  &$mm$  &$1\ Byte$  &$[16:23]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Left suspension  &$mm$  &$1\ Byte$  &$[24:31]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Right phonic wheel  &$rpm$  &$2\ Bytes$  &$[32:47]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{2-5}
&Left phonic wheel  &$rpm$  &$2\ Bytes$  &$[48:63]$   &\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}&\multicolumn{1}{c|}{}\\\cline{1-8}
$TCU$  &Torque limiter  &$\%$  &$1\ Byte$  &$[0:7]$  &\#4  &T\+P\+D\+O1 + N\+O\+D\+E-\/\+ID  &1   \\\cline{1-8}
\end{longtabu}
{\itshape where T\+P\+D\+O1 = 0x180 and T\+P\+D\+O2 = 0x280} 